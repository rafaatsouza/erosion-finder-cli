function drawArchitecturalRulesChart(){let e=document.getElementById("architectural_rules_chart"),t={type:"doughnut",data:{datasets:[{data:[followedRules.length,transgressedRules.length],backgroundColor:["rgb(7, 163, 20)","rgb(214, 16, 16)"]}],labels:["Followed Rules","Transgressed Rules"]},options:{responsive:!0,maintainAspectRatio:!1,circumference:Math.PI,rotation:-Math.PI,legend:{position:"bottom"},animation:{animateRotate:!0}}};new Chart(e,t)}function createElementWithClass(e,t){let l=document.createElement(e);return l.className=t,l}function getMediaDiv(e,t){let l=createElementWithClass("div","media"),n=createElementWithClass("div","media-body rule-description"),a=createElementWithClass("div","align-self-center background-icon rule-icon"),i=createElementWithClass("p","media-heading");t?a.classList.add("rule-icon-fail"):a.classList.add("rule-icon-check");let s=`<b>Origin: </b>${e.OriginLayer} `;if(s+=`<b>Operator: </b>${e.RuleOperator} `,s+=`<b>Target: </b>${e.TargetLayer}`,null!=e.RelationTypes&&e.RelationTypes.length>0){let t="";for(let l=0;l<e.RelationTypes.length;l++)t+=(t.length>0?", ":"")+e.RelationTypes[l];s+=`<br />Applied to: ${t}`}else s+="<br />Applied to all relation types";return i.innerHTML=s,n.appendChild(i),l.appendChild(a),l.appendChild(n),l}function getExpandButton(e,t){let l=createElementWithClass("a",e);l.setAttribute("data-toggle","collapse"),l.setAttribute("href",`#${t}`),l.setAttribute("role","button"),l.setAttribute("aria-expanded","false"),l.setAttribute("aria-controls",t);let n=createElementWithClass("div","align-self-center background-icon expand-button expand-plus-button");return l.appendChild(n),l}function getExpandComponent(e,t,l,n,a){let i=createElementWithClass("div",e),s=createElementWithClass("div","row"),r=createElementWithClass("div","col-12"),o=getExpandButton(t,l),d=createElementWithClass("div","collapse multi-collapse row"),u=createElementWithClass("div","col-12");d.setAttribute("id",l),r.appendChild(o),s.appendChild(r);let p=createElementWithClass("span","expand-complement");return p.innerText=n,o.appendChild(p),a(u),d.appendChild(u),i.appendChild(s),i.appendChild(d),i}function getViolationListItem(e){let t=createElementWithClass("li","list-group-item"),l=e.NonConformingRelations;if(null!=l&&l.length>0){let n=getExpandComponent("violation-relations","expand-relations",`collapse-${GetUuidV4()}`,` ${e.Structure}`,function(e){let t=createElementWithClass("ul","list-group list-group-flush");for(let e=0;e<l.length;e++){let n=l[e].Targets,a=l[e].RelationType,i=createElementWithClass("li","list-group-item");if(1==n.length)i.innerHTML=`<b>Type: </b>${a} - <b>Target: </b>${n[0]}`;else{i.innerHTML=`<b>Type: </b>${a}<br />`;let e=createElementWithClass("ul","list-group list-group-flush");for(let t=0;t<n.length;t++){let l=createElementWithClass("li","list-group-item");l.innerText=n[t],e.appendChild(l)}i.appendChild(e)}t.appendChild(i)}e.appendChild(t)});t.appendChild(n)}else t.innerText=e.Structure;return t}function getViolationsDiv(e){return getExpandComponent("rule-violations","expand-violations",`violations-collapse-${document.getElementsByClassName("rule-content").length+1}`," Rule Violations",function(t){let l=createElementWithClass("ul","list-group list-group-flush");for(let t=0;t<e.length;t++)l.appendChild(getViolationListItem(e[t]));t.appendChild(l)})}function insertRule(e,t,l){let n=null!=l&&l.length>0,a=createElementWithClass("div","rule-content");a.appendChild(getMediaDiv(t,n)),n&&a.appendChild(getViolationsDiv(l)),e.appendChild(a)}function fillWithRules(){const e=document.getElementById("rule-list");for(let t=0;t<transgressedRules.length;t++)insertRule(e,transgressedRules[t].Rule,transgressedRules[t].Violations);for(let t=0;t<followedRules.length;t++)insertRule(e,followedRules[t],null)}function getParentByClass(e,t){return null==e||e.classList.contains(t)?e:getParentByClass(e.parentElement,t)}function addToggleEventButton(e){let t=document.getElementsByClassName(e);for(let l=0;l<t.length;l++)t[l].addEventListener("click",function(t){let l=getParentByClass(t.srcElement,e);if(null!=l){let e=l.getElementsByClassName("expand-button")[0];e&&(e.classList.contains("expand-plus-button")?(e.classList.remove("expand-plus-button"),e.classList.add("expand-minus-button")):(e.classList.remove("expand-minus-button"),e.classList.add("expand-plus-button")))}},!1)}function GetUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return t.toString(16)})}